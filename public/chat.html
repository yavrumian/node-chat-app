<!DOCTYPE html>
<html>
<head>
    <title>Chat | ChapApp</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./css/jquery-ui.min.css" />

    <link rel="stylesheet" type="text/css" href="./css/styles.css">
    <style>
        .loader{
            width: 50%;
            background-color: white;
            text-align: center;
            border-radius: 40px;
        }
        .loader img{
            width: 50%;
            margin-top: 3vh;
        }
        .loader p{
            font-size:1.5rem;
            padding-bottom: 5vh;
        }
        .loader-bg{
            position: absolute;
            display: none;
            background: linear-gradient(325deg,rgba(39,107,130,1) 0,rgba(49,84,129,1) 100%);
            width:100vw;
            height: 100vh;
            justify-content: center;
            align-items: center;
        }
        .loader-show{
            display: flex;
        }
        .load-more-btn{
            text-align: center;
            margin-top: 1vh;
        }
        li > button{
            border-radius: 5px;
            display: none
        }
        .no-message-warning{
            display: none;
            font-style: italic;
            padding: 10px;
        }
    </style>
</head>

<body class="chat">
    <a class="toggle-button" id="toggle-sidebar">‚ù∞</a>
    <div class="chat__sidebar" id="sidebar">
        <div>
            <h3>Members</h3>
            <a class="button__share tooltip">
                <i class="fas fa-share-square fa-lg"></i>
                <span class="tooltiptext" id="myPopup">
                    <input id="shareable-link" type="text" value="https://somesite.cm?rroom=adsdf" readonly />
                    <i class="far fa-copy" data-clipboard-target="#shareable-link" title="Copy the link"></i>
                </span>
            </a>
        </div>
        <div id="users"></div>
    </div>
    <div class="chat__main">
        <div class="chat__head">
            <button id="back-button"><i class="fas fa-sign-out-alt fa-lg"></i></i></button>
            <span id="chat-head"></span>
        </div>

        <ul id="messages" class="chat__messages" style="list-style-type:none">
            <li class="no-message-warning">
                No more messages to load
            </li>
            <li class="load-more-btn">
                <button id="load-more">Load more <i class="fas fa-arrow-up"></i></button>
            </li>
        </ul>
        <div class="chat__footer">
            <form id="message-form">
                <input type="text" id="message-input" placeholder="Your message here" name="message" autofocus autocomplete="off" />
                <button>Send</button>
            </form>
            <button id="send-loc">Send location</button>
        </div>
    </div>

	<script id="message-template" type="text/template">
		<li class="message">
			<div class="message__title">
				<h4>{{from}}</h4>
				<span>{{time}}</span>
			</div>
			<div class="message__body">
				<p>{{text}}</p>
			</div>
		</li>
	</script>

  <script id="loc-message-template" type="text/template">
		<li class="message">
			<div class="message__title">
				<h4>{{from}}</h4>
				<span>{{time}}</span>
			</div>
			<div class="message__body">
				<p>
          <a href="{{url}}" target="_blank">My Location</a>
        </p>
			</div>
		</li>
	</script>
    <div class="loader-bg" id="loader">
        <div class="loader">
            <img alt="Loading..." src="/img/dots.gif" />
            <p>Waiting for match...</p>
        </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/libs/mustache.js"></script>
    <script src="/js/libs/clipboard.min.js"></script>
    <script src="/js/libs/moment.js"></script>
    <script src="/js/libs/jquery-3.3.1.min.js"></script>
    <script src="/js/libs/jquery-ui.min.js"></script>
    <script src="/js/libs/deparam.js"></script>
    <script src="/js/libs/js.cookie.js"></script>
    <script src="/js/libs/linkify.min.js"></script>
    <script src="/js/libs/linkify-jquery.min.js"></script>
    <script src="/js/libs/base64.js"></script>
    <script src="/js/chat.js"></script>
</body>
</html>
